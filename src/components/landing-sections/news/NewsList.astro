---
import { Image, Picture } from 'astro:assets';
import type { ImageMetadata } from 'astro';
const images = import.meta.glob<{ default: ImageMetadata }>('~/assets/images/news/*.{jpeg,jpg,png,gif}');
const articles = [
  {
    date: '27.10.2023',
    category: 'Обновления',
    title: 'Улучшение Невероятного Кристалла Адена Оружие/ Доспех',
    link: '/',
    image: '/src/assets/images/news/1.jpg',
  },
  {
    date: '27.10.2023',
    category: 'Акции',
    title: '27.10-10.11 Утерянные сокровища Камаради',
    link: '/',
    image: '/src/assets/images/news/2.jpg',
  },
  {
    date: '27.10.2023',
    category: 'Акции',
    title: 'Атака гигантов на Эльмораден',
    link: '/',
    image: '/src/assets/images/news/3.jpg',
  },
  {
    date: '27.10.2023',
    category: 'Акции',
    title: 'Атака гигантов на Эльмораден',
    link: '/',
    image: '/src/assets/images/news/4.jpg',
  },
];

const { type, ...rest } = Astro.props;
---

<script>
  (function () {
    function scrollHorizontally(e) {
      e = window.event || e;
      var delta = Math.max(-1, Math.min(1, e.wheelDelta || -e.detail));
      this.scrollLeft -= delta * 40; // Multiplied by 40
      if (
        (delta > 0 && document.querySelector('.js-news-articles').scrollLeft > 0) ||
        (delta < 0 &&
          document.querySelector('.js-news-articles').offsetWidth +
            document.querySelector('.js-news-articles').scrollLeft <
            document.querySelector('.js-news-articles').scrollWidth)
      ) {
        e.preventDefault();
      }
    }
    if (document.querySelector('.js-news-articles').addEventListener) {
      // IE9, Chrome, Safari, Opera
      document.querySelector('.js-news-articles').addEventListener('mousewheel', scrollHorizontally, false);
      // Firefox
      document.querySelector('.js-news-articles').addEventListener('DOMMouseScroll', scrollHorizontally, false);
    }
  })();
</script>

<article class:list={['landing-news__articles', 'js-news-articles', { [`type-${type}`]: type }]} {...rest}>
  {
    articles.map(({ date, category, title, link, image }) => (
      <a href="/" class="news-article js-news-article">
        <div class="news-article__media">
          <Image class="news-article__image" src={images[`${image}`]()} alt="" />
          <div class="news-article__date">{date}</div>
          <div class="news-article__category">
            <span class="news-article__category-text">{category}</span>
          </div>
        </div>

        <h2 class="news-article__title">{title}</h2>
      </a>
    ))
  }
</article>
