---
import './spells.css';
const { align, title, intro, list } = Astro.props;
---

<script>
  import { Tab } from 'bootstrap';
  const triggerTabList = document.querySelectorAll('#spells-tabs button');
  triggerTabList.forEach((triggerEl) => {
    const tabTrigger = new Tab('#spells-tabs');

    triggerEl.addEventListener('click', (event) => {
      event.preventDefault();
      tabTrigger.show();
    });
  });
</script>

<div class="spells">
  <div class="spells__intro">
    <p>{intro}</p>
  </div>

  <div class="spells__title">
    {title}
  </div>

  <div class="spells__list">
    <ul class="spells__nav" id="spells-tabs" role="tablist">
      {
        list &&
          list.map((spell, id) => (
            <li class="spells__nav-item" role="presentation">
              <button
                class:list={['spells__nav-button', { [`active`]: id == 0 }]}
                id={`spell-${spell.id}-tab`}
                data-bs-toggle="tab"
                data-bs-target={`#spell-${spell.id}-tab-pane`}
                type="button"
                role="tab"
                aria-controls={`spell-${spell.id}-tab-pane`}
              >
                <img src={spell.img} alt="" />
              </button>
            </li>
          ))
      }
    </ul>

    <div class="spells__tab-content">
      {
        list &&
          list.map((spell, id) => (
            <div
              class:list={('spells__tab-pane', { [`show`]: id == 0 })}
              id={`spell-${spell.id}-tab-pane`}
              role="tabpanel"
              aria-labelledby={`${spell.id}-tab`}
              tabindex="0"
            >
              <h3>{spell.title}</h3>
              <p>{spell.text}</p>
            </div>
          ))
      }
    </div>
  </div>
</div>

<style lang="postcss">
  .spells__tab-pane {
    display: none;

    &.active {
      display: block;
    }
  }

</style>
